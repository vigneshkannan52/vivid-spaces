{"version":3,"sources":["features-timeline/assets/js/famulus_layout1.js"],"names":["$","window","document","timelines","eventsMinDistance","updateSlide","timelineComponents","timelineTotWidth","string","newContent","visibleContent","wrapperWidth","Number","css","replace","translateTimeline","translateValue","selectedDate","newEvent","updateOlderEvents","find","updateTimelinePosition","length","parent","prev","children","updateFilling","eventStyle","event","updateVisibleContent","getPropertyValue","timelineWidth","timelineTranslate","getComputedStyle","value","totWidth","eventLeft","eventsWrapper","getTranslateValue","addClass","get","setTransformValue","removeClass","distanceNorm","Math","selectedEvent","i","eventWidth","scaleValue","setTimelineWidth","classLeaving","eventsContent","selectedContent","eventDate","data","attr","classEnetering","index","selectedContentHeight","timelineStyle","one","indexOf","prevAll","end","nextAll","timeline","element","property","events","split","dateArrays","second","style","round","minLapse","daydiff","elementInViewport","top","el","offsetTop","first","jQuery","left","offsetLeft","width","offsetWidth","height","offsetHeight","offsetParent","pageYOffset","innerHeight","pageXOffset","innerWidth","checkMQ","querySelector","initTimeline","this","dateDistances","push","each","dateComp","newDate","min","apply","parseDate","dates","distance","timeSpanNorm","totalWidth","eq","setDatePosition","timelineLastDate","last","hasClass","preventDefault","on","mq","showNewContent","keyup"],"mappings":"cAAC,SAAWA,EAAGC,EAAQC,GAGtB,IAAIC,EAAYH,EAAE,mCAHjBI,EAAqBF,IA8FrB,SAAAG,EAAAC,EAAAC,EAAAC,GACA,IACCC,EAAcD,EAAoBE,EAArB,eAVbC,EAAeC,OAAON,EAAkB,gBAAoBO,IAAI,SAASC,QAAQ,KAAM,KAY3D,QAAAN,EAC5BO,EAAkBT,EAAqBU,EAAlBL,EAAyCP,EAA9DO,EAAAJ,GAAAQ,EACaP,EAAoBS,EAAoBN,EAApBP,GAIjCc,SAAAA,EAAkBZ,EAAlBC,EAAAC,GAEAW,IAAAA,EAAkBD,EAAlB,cAAAE,KAAA,aAGD,GAAA,GAFCC,QAAAA,EAA+BH,EAAUZ,OAAAA,EAAoBC,QAE9De,OAAA,CAVC,IAAML,EAAeX,EAAkB,cAAkBc,KAAK,aAYhEF,EAASG,QAAAA,EAAuBb,EAAeF,OAAAA,MAAAA,KAA/C,MAAmEC,SAAAA,KAAkBU,EAAAM,OAAA,MAAAC,KAAA,MAAAC,SAAA,KAEpFC,EAAMC,EAAmBrB,EAAkBsB,YAAcrB,GAAzDsB,EACajB,EAAOe,EAAWG,eAD/BZ,EAECa,SAAa,YAEdxB,EAAAA,YAAmBK,YACnBO,EAAMa,GAKN,SAAAxB,EAAAoB,EAAAtB,EAAAC,GAGD,IAAAoB,EAASZ,EAATkB,iBAA2B3B,EAAoB4B,IAA/C,GAAsDC,MACrDC,EAAMC,OAAaV,EAAGrB,iBAAmB,QAADQ,QAAxC,KAAA,KACAoB,EAActB,OAANN,EAAyB,gBAAAO,IAAA,SAAAC,QAAA,KAAA,KACjCoB,EAAkBC,OAAAA,EAAT,cAA8CA,IAA/C,SAAArB,QAAR,KAAqF,KAXrF,IAAMkB,EAAoBM,EAAkBhC,EAAkB,gBAE/C,QAAVE,GAAgCuB,EAAgBC,EAA5BI,GAA6D,QAAV5B,GAAoB4B,GAAaJ,IAY5GE,EAAc5B,EAAmByB,EAAnB,EAAmBK,EAAoCG,EAAShC,GAzB9Ec,CAAuBb,EAAQU,EAAUZ,EAAoBC,IA8B9D,SAAAQ,EAAAT,EAAA4B,EAAAC,GAEAD,EAAa,EAATE,EAAYT,EAAAA,EAEhBS,EAHmBnC,EAAOgC,cAA+BO,IAAd,GAGd1B,cAD7BoB,OAA8BJ,IAAdK,GAA+BD,EAA/CC,EAAAA,EAAAD,GACkDtB,MAElD6B,GAAAA,EAAAA,EAAkB,mBAADrB,KAAjB,SAAAmB,SAAA,YAAAjC,EAAA,mBAAAc,KAAA,SAAAsB,YAAA,YACAR,GAAAC,EAAA7B,EAAA,mBAAAc,KAAA,SAAAmB,SAAA,YAAAjC,EAAA,mBAAAc,KAAA,SAAAsB,YAAA,YAGA,SAAKhB,EAAepB,EAAAA,EAAmB6B,GACtC,IAAAR,EACCgB,EAAeC,iBAAmBC,EAAGvC,IAAAA,GAAmB,MACzDA,EAAAA,EAAmBwB,iBAAqBgB,QACxCC,EAAApB,EAAAG,iBAAA,SATKkB,GAUNZ,EAAAxB,OAAAwB,EAAAtB,QAAA,KAAA,KAAAF,OAAAmC,EAAAjC,QAAA,KAAA,KAAA,GAV+BqB,EAYhCM,EAASQ,EAAiB3C,IAAAA,GAAAA,SAA1B0C,GAwBEE,SAAAA,EAAetB,EAAfuB,GACA,IAKAzC,EACA0C,EANAC,EAAAzB,EAAA0B,KAAA,QAZA5C,EAAiByC,EAAc/B,KAAK,aAerCgC,EAAgBG,EAAcC,KAAAA,eAA9BH,EAAA,MACA3C,EAAoB0C,EAASF,SAR5BA,EAYDC,EAAkBM,QAAUC,EAAAA,SAC5BF,EAAA,uBAbgB,eAgBhB5B,EAAa,sBACb,eAIAwB,EAAIpB,KAAAA,QAAoB2B,GAKxBjD,EAAIM,KAAc,QAAlBkC,GAAAU,IAAA,+DAAA,WAjBClD,EAAegC,YAAY,0BAmB5BU,EAAIpB,YAAkB6B,4BAErB7B,EAAAA,IAAAA,SAAoBA,EAAA,MAGpB,SAAAb,EAAAS,GAjBDA,EAAML,OAAO,MAAMuC,QAAQ,MAAMrC,SAAS,KAAKc,SAAS,eAAewB,MAAMA,MAAMC,QAAQ,MAAMvC,SAAS,KAAKiB,YAAY,eAG5H,SAASJ,EAAkB2B,GAoB3B,IAAAN,EAASlB,EAAkByB,iBAAmBhC,EAAOM,IAAA,GAAA,MACpD0B,EAAcP,EAAd7B,iBAAqC,sBACrCoC,EAAApC,iBAAA,mBACAoC,EAAApC,iBAAA,kBACAoC,EAAApC,iBAAA,iBACAoC,EAAApC,iBAA6BqC,aAG9BnD,EAAA,EASC,OA5BsC,GAAlCgB,EAAkB6B,QAAQ,OAuB7B7C,GADDoD,GADApC,GADDA,EAAmBoC,EAAQC,MAAA,KAAA,IAC1BA,MAAA,KAAA,IACwBA,MAAA,MACO,IAK/BzD,OAAO0D,GAIR,SAAA7B,EAAwB8B,EAAQJ,EAAAjC,GAC/BgC,EAAAM,MAAYC,qBAAZN,EAAA,IAAAjC,EAAA,IACAgC,EAAAM,MAAA,kBAAAL,EAAA,IAAAjC,EAAA,IApBAgC,EAAQM,MAAM,iBAAmBL,EAAW,IAAMjC,EAAQ,IAsB3DgC,EAAAM,MAASE,gBAAgBP,EAAA,IAAAjC,EAAA,IACxBgC,EAAAM,MAAA,UAAAL,EAAA,IAAAjC,EAAA,IAaD,SAAAyC,EAASC,EAAAA,GACR,OAAIC,KAAMC,MAAGC,EAAbC,GAsBA,SAAAJ,EAAAE,GAjBA,IAnQD,IAqREG,EAAQhF,EAAAA,UAtBLiF,EAAOJ,EAAGK,WACVC,EAAQN,EAAGO,YACXC,EAASR,EAAGS,aAETT,EAAGU,cAETX,IADAC,EAAKA,EAAGU,cACET,UACVG,GAAQJ,EAAGK,WAGZ,OACCN,EAAO5E,EAAOwF,YAAcxF,EAAOyF,aACnCR,EAAQjF,EAAO0F,YAAc1F,EAAO2F,YACnCf,EAAMS,EAAUrF,EAAOwF,aACvBP,EAAOE,EAASnF,EAAO0F,YAI1B,SAASE,IAER,OAAO5F,EAAOgC,iBAAiB/B,EAAS4F,cAAc,kCAAmC,YAAYhE,iBAAiB,WAAWhB,QAAQ,KAAM,IAAIA,QAAQ,KAAM,IA/QjKV,EADDD,EACCC,QADDD,EAKS4F,KAAAA,WAGP,IAAA9B,EAAcjE,EAAIgG,MAAlB1F,EACCA,GAEDA,EAAAA,gBAAA2D,EAAwCA,KAAS7C,mCACjDd,EAAAA,cAAAA,EAAsCA,gBAAmBmB,SAAmBA,2BAC5EnB,EAAAA,YAAAA,EAAoCA,cAAmBmB,SAAiBA,iCACxEnB,EAAAA,eAAAA,EAAuCA,cAAmBc,KAAiBA,KAC3Ed,EAAAA,cAiOA,SAAc8D,GACd6B,IAAAA,EAAcC,GAbf,OAcC9B,EAAA+B,KAAA,WAnBA,IAAMC,EAAWpG,EAAEgG,MAAM1C,KAAK,QAoB/B+C,EAAOzD,IAAK0D,KAAIC,GAChBjC,EAAA4B,KAAAG,KAhBO/B,EArNNkC,CAAsCA,EAAUlG,gBAChDA,EAAAA,eA8OD,SAAemG,GAGd3B,IADD,IAAAmB,EAAUT,GACJV,EAAGU,EAAAA,EAAAA,EAARlE,OAAAwB,IAAA,CACA+B,IAAG6B,EAAO3B,EAAV0B,EAAA3D,EAAA,GAAA2D,EAAA3D,IACAoC,EAAWC,KAAAA,GAhBZ,OAAOvC,KAAK0D,IAAIC,MAAM,KAAMN,GAnO3BvB,CAAuCA,EAASpE,eAChDA,EAAAA,mBAAA2D,EAA2CA,KAAS7C,+BACpDd,EAAAA,cAAA2D,EAAsCA,SAASxC,mCAwIhDkF,SAAoBlC,EAAsB6B,GAC1C,IAAA,IAAMM,EAAAA,EAAU9D,EAAG6D,EAAevB,cAAlC9D,OAAAwB,IAAA,CACAxC,IAAAA,EAAAA,EAAmBA,EAAqB,cAAmB,GAAGA,EAA9D,cAAAwC,IACApB,EAAcpB,KAAAA,MAAAA,EAAmBA,EAAnB,gBAA+D,EAE7EA,EAAA,eAAAuG,GAAA/D,GAAAjC,IAAA,OAAA8B,EAAA2D,EAAA,OA1ICQ,CAAgBxG,EAAoBF,GAEpC,IAAMG,EA4IP,SAAwB+C,EAAxB8B,GAAA,IAAAuB,EACCjG,EAAiByC,EAAmB,cADrC,GAAA7C,EAAA,cAAAA,EAAA,cAAAgB,OAAA,IAEmB6B,EAAmB,eAElCK,GAJJmD,EAGCjD,KAAAA,MAAAA,GAAwBN,GACzBgC,EAKClC,OAhBD5C,EAAkB,cAAkBO,IAAI,QAAS+F,EAAa,MAc9DlF,EAAI0B,EAA0B1C,eAAe+C,GAA7C,GAAsDnD,EAAA,YAAAsG,GAErD1D,EArJyBD,CAAiB3C,EAAoBF,GAK9DJ,EAAEC,SAAW,UAIZD,EAAAC,GAAG8G,GAAAA,2BAA0B,WAG5BzG,EAAA,cAAAc,KAAA,MAAA4F,OAAA5F,KAAA,KAHmB6F,SAAS,aAS7BrF,EAAMsF,EAAN3G,EAAA,UAMAF,EAAYC,mBAAoBC,GAAAA,QAArB,QAAX,SAAAqB,GACAA,EACDsF,iBAPC7G,EAAYC,EAAoBC,EAAkB,UAUlDD,EAAAA,mBAAA6G,GAAqCzE,QAArC,QAAiD,SAAjDd,GACA5B,EAAEkH,iBACF/F,EAAAA,EAAAZ,EAAA,UAGAD,EAED,cAAA6G,GAAA,QAAA,IAAA,SAAAvF,GARCA,EAAMsF,iBASP5G,EAAAA,eAAAoC,YAAuC,YACtC1C,EAAAgG,MAAMoB,SAAKvB,YACVuB,EAADpH,EAAAgG,OACAtE,EAHD1B,EAAAgG,MAAA1F,EAAA,YAAAC,GAIAD,EAAmBN,EAAAgG,MAAA1F,EAAoB,iBAJvCA,EAAkB,cAAkB6G,GAAG,YAAa,WAWnD,UADCjH,KACGmH,EAAuBzC,EAAkBX,EAAkB,UAE9D3D,EAAUsB,cAAAuF,GAAuBvC,aAAAA,WAEjC,UADAyC,KACAA,EAAA/G,EAAAC,EAAA,UALFP,EAAEE,GAAUoH,MAAM,SAAU1F,GAUTtB,MAArBsB,EAASvB,OAAYC,EAAoBC,EAAAA,IAAkBC,IAC1D6G,EAAA/G,EAAAC,EAAA,QACuB+B,MAAjBtB,EAAAA,OAAiBsB,EAAkBhC,EAAmBkC,IAAA,KAA5D6E,EACa/G,EAAUA,EAAmB,YAtF3C,CAqRE2E,OAAQhF,OAAQC","file":"famulus_layout1.min.js","sourcesContent":[";(function ($, window, document, undefined) {\r\n\r\n\r\n\tlet timelines = $('.aheto-timeline--famulus-modern'),\r\n\t\teventsMinDistance = 120;\r\n\r\n\t(timelines.length > 0) && initTimeline(timelines) ;\r\n\r\n\tfunction initTimeline(timelines) {\r\n\t\ttimelines.each(function () {\r\n\r\n\t\t\tconst timeline = $(this),\r\n\t\t\t\ttimelineComponents = {};\r\n\t\t\t//cache timeline components\r\n\t\t\ttimelineComponents['timelineWrapper'] = timeline.find('.aheto-timeline__events-wrapper');\r\n\t\t\ttimelineComponents['eventsWrapper'] = timelineComponents['timelineWrapper'].children('.aheto-timeline__events');\r\n\t\t\ttimelineComponents['fillingLine'] = timelineComponents['eventsWrapper'].children('.aheto-timeline__filling-line');\r\n\t\t\ttimelineComponents['timelineEvents'] = timelineComponents['eventsWrapper'].find('a');\r\n\t\t\ttimelineComponents['timelineDates'] = parseDate(timelineComponents['timelineEvents']);\r\n\t\t\ttimelineComponents['eventsMinLapse'] = minLapse(timelineComponents['timelineDates']);\r\n\t\t\ttimelineComponents['timelineNavigation'] = timeline.find('.aheto-timeline__navigation');\r\n\t\t\ttimelineComponents['eventsContent'] = timeline.children('.aheto-timeline__events-content');\r\n\r\n\t\t\t//assign a left postion to the single events along the timeline\r\n\t\t\tsetDatePosition(timelineComponents, eventsMinDistance);\r\n\t\t\t//assign a width to the timeline\r\n\t\t\tconst timelineTotWidth = setTimelineWidth(timelineComponents, eventsMinDistance);\r\n\t\t\t//the timeline has been initialize - show it\r\n\t\t\ttimeline.addClass('loaded');\r\n\r\n\r\n\t\t\t$(window).on('resize orientationchange', function () {\r\n\r\n\t\t\t\tconst timelineLastDate =  timelineComponents['eventsWrapper'].find('li').last().find('a');\r\n\r\n\t\t\t\tif(timelineLastDate.hasClass('selected')){\r\n\r\n\t\t\t\t\tupdateSlide(timelineComponents, timelineTotWidth, 'next');\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\t//detect click on the next arrow\r\n\t\t\ttimelineComponents['timelineNavigation'].on('click', '.next', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tupdateSlide(timelineComponents, timelineTotWidth, 'next');\r\n\t\t\t});\r\n\t\t\t//detect click on the prev arrow\r\n\t\t\ttimelineComponents['timelineNavigation'].on('click', '.prev', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tupdateSlide(timelineComponents, timelineTotWidth, 'prev');\r\n\t\t\t});\r\n\t\t\t//detect click on the a single event - show new event content\r\n\t\t\ttimelineComponents['eventsWrapper'].on('click', 'a', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\ttimelineComponents['timelineEvents'].removeClass('selected');\r\n\t\t\t\t$(this).addClass('selected');\r\n\t\t\t\tupdateOlderEvents($(this));\r\n\t\t\t\tupdateFilling($(this), timelineComponents['fillingLine'], timelineTotWidth);\r\n\t\t\t\tupdateVisibleContent($(this), timelineComponents['eventsContent']);\r\n\t\t\t});\r\n\r\n\t\t\t//on swipe, show next/prev event content\r\n\t\t\ttimelineComponents['eventsContent'].on('swipeleft', function () {\r\n\t\t\t\tconst mq = checkMQ();\r\n\t\t\t\t(mq == 'mobile') && showNewContent(timelineComponents, timelineTotWidth, 'next');\r\n\t\t\t});\r\n\t\t\ttimelineComponents['eventsContent'].on('swiperight', function () {\r\n\t\t\t\tconst mq = checkMQ();\r\n\t\t\t\t(mq == 'mobile') && showNewContent(timelineComponents, timelineTotWidth, 'prev');\r\n\t\t\t});\r\n\r\n\t\t\t//keyboard navigation\r\n\t\t\t$(document).keyup(function (event) {\r\n\t\t\t\tif (event.which == '37' && elementInViewport(timeline.get(0))) {\r\n\t\t\t\t\tshowNewContent(timelineComponents, timelineTotWidth, 'prev');\r\n\t\t\t\t} else if (event.which == '39' && elementInViewport(timeline.get(0))) {\r\n\t\t\t\t\tshowNewContent(timelineComponents, timelineTotWidth, 'next');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tfunction updateSlide(timelineComponents, timelineTotWidth, string) {\r\n\t\t//retrieve translateX value of timelineComponents['eventsWrapper']\r\n\t\tconst translateValue = getTranslateValue(timelineComponents['eventsWrapper']),\r\n\t\t\twrapperWidth = Number(timelineComponents['timelineWrapper'].css('width').replace('px', ''));\r\n\t\t//translate the timeline to the left('next')/right('prev')\r\n\t\t(string == 'next')\r\n\t\t\t? translateTimeline(timelineComponents, translateValue - wrapperWidth + eventsMinDistance, wrapperWidth - timelineTotWidth)\r\n\t\t\t: translateTimeline(timelineComponents, translateValue + wrapperWidth - eventsMinDistance);\r\n\t}\r\n\r\n\tfunction showNewContent(timelineComponents, timelineTotWidth, string) {\r\n\t\t//go from one event to the next/previous one\r\n\t\tconst visibleContent = timelineComponents['eventsContent'].find('.selected'),\r\n\t\t\tnewContent = (string == 'next') ? visibleContent.next() : visibleContent.prev();\r\n\r\n\t\tif (newContent.length > 0) { //if there's a next/prev event - show it\r\n\t\t\tconst selectedDate = timelineComponents['eventsWrapper'].find('.selected'),\r\n\t\t\t\tnewEvent = (string == 'next') ? selectedDate.parent('li').next('li').children('a') : selectedDate.parent('li').prev('li').children('a');\r\n\r\n\t\t\tupdateFilling(newEvent, timelineComponents['fillingLine'], timelineTotWidth);\r\n\t\t\tupdateVisibleContent(newEvent, timelineComponents['eventsContent']);\r\n\t\t\tnewEvent.addClass('selected');\r\n\t\t\tselectedDate.removeClass('selected');\r\n\t\t\tupdateOlderEvents(newEvent);\r\n\t\t\tupdateTimelinePosition(string, newEvent, timelineComponents, timelineTotWidth);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction updateTimelinePosition(string, event, timelineComponents, timelineTotWidth) {\r\n\t\t//translate timeline to the left/right according to the position of the selected event\r\n\t\tconst eventStyle = window.getComputedStyle(event.get(0), null),\r\n\t\t\teventLeft = Number(eventStyle.getPropertyValue(\"left\").replace('px', '')),\r\n\t\t\ttimelineWidth = Number(timelineComponents['timelineWrapper'].css('width').replace('px', ''));\r\n\r\n\t\ttimelineTotWidth = Number(timelineComponents['eventsWrapper'].css('width').replace('px', ''));\r\n\t\tconst timelineTranslate = getTranslateValue(timelineComponents['eventsWrapper']);\r\n\r\n\t\tif ((string == 'next' && eventLeft > timelineWidth - timelineTranslate) || (string == 'prev' && eventLeft < -timelineTranslate)) {\r\n\t\t\ttranslateTimeline(timelineComponents, -eventLeft + timelineWidth / 2, timelineWidth - timelineTotWidth);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction translateTimeline(timelineComponents, value, totWidth) {\r\n\t\tconst eventsWrapper = timelineComponents['eventsWrapper'].get(0);\r\n\t\tvalue = (value > 0) ? 0 : value; //only negative translate value\r\n\t\tvalue = (!(typeof totWidth === 'undefined') && value < totWidth) ? totWidth : value; //do not translate more than timeline width\r\n\t\tsetTransformValue(eventsWrapper, 'translateX', value + 'px');\r\n\t\t//update navigation arrows visibility\r\n\t\t(value == 0) ? timelineComponents['timelineNavigation'].find('.prev').addClass('inactive') : timelineComponents['timelineNavigation'].find('.prev').removeClass('inactive');\r\n\t\t(value == totWidth) ? timelineComponents['timelineNavigation'].find('.next').addClass('inactive') : timelineComponents['timelineNavigation'].find('.next').removeClass('inactive');\r\n\t}\r\n\r\n\tfunction updateFilling(selectedEvent, filling, totWidth) {\r\n\t\t//change .aheto-timeline__filling-line length according to the selected event\r\n\t\tconst eventStyle = window.getComputedStyle(selectedEvent.get(0), null);\r\n\t\tlet eventLeft = eventStyle.getPropertyValue(\"left\");\r\n\t\tconst eventWidth = eventStyle.getPropertyValue(\"width\");\r\n\t\teventLeft = Number(eventLeft.replace('px', '')) + Number(eventWidth.replace('px', '')) / 2;\r\n\t\tconst scaleValue = eventLeft / totWidth;\r\n\t\tsetTransformValue(filling.get(0), 'scaleX', scaleValue);\r\n\t}\r\n\r\n\tfunction setDatePosition(timelineComponents, min) {\r\n\t\tfor (let i = 0; i < timelineComponents['timelineDates'].length; i++) {\r\n\t\t\tconst distance = daydiff(timelineComponents['timelineDates'][0], timelineComponents['timelineDates'][i]),\r\n\t\t\t\tdistanceNorm = Math.round(distance / timelineComponents['eventsMinLapse']) + 2;\r\n\t\t\ttimelineComponents['timelineEvents'].eq(i).css('left', distanceNorm * min + 'px');\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setTimelineWidth(timelineComponents, width) {\r\n\t\tconst timeSpan = daydiff(timelineComponents['timelineDates'][0], timelineComponents['timelineDates'][timelineComponents['timelineDates'].length - 1]);\r\n\t\tlet timeSpanNorm = timeSpan / timelineComponents['eventsMinLapse'];\r\n\t\ttimeSpanNorm = Math.round(timeSpanNorm) + 4;\r\n\t\tconst totalWidth = timeSpanNorm * width;\r\n\t\ttimelineComponents['eventsWrapper'].css('width', totalWidth + 'px');\r\n\t\tupdateFilling(timelineComponents['timelineEvents'].eq(0), timelineComponents['fillingLine'], totalWidth);\r\n\r\n\t\treturn totalWidth;\r\n\t}\r\n\r\n\tfunction updateVisibleContent(event, eventsContent) {\r\n\t\tconst eventDate = event.data('date'),\r\n\t\t\tvisibleContent = eventsContent.find('.selected'),\r\n\t\t\tselectedContent = eventsContent.find('[data-date=\"' + eventDate + '\"]'),\r\n\t\t\tselectedContentHeight = selectedContent.height();\r\n\t\tlet classEnetering,\r\n\t\t\tclassLeaving;\r\n\r\n\t\tif (selectedContent.index() > visibleContent.index()) {\r\n\t\t\tclassEnetering = 'selected enter-right';\r\n\t\t\tclassLeaving = 'leave-left';\r\n\t\t} else {\r\n\t\t\tclassEnetering = 'selected enter-left';\r\n\t\t\tclassLeaving = 'leave-right';\r\n\t\t}\r\n\r\n\r\n\t\tselectedContent.attr('class', classEnetering);\r\n\t\tvisibleContent.attr('class', classLeaving).one('webkitAnimationEnd oanimationend msAnimationEnd animationend', function () {\r\n\t\t\tvisibleContent.removeClass('leave-right leave-left');\r\n\t\t\tselectedContent.removeClass('enter-left enter-right');\r\n\t\t});\r\n\t\teventsContent.css('height', selectedContentHeight + 'px');\r\n\t}\r\n\r\n\tfunction updateOlderEvents(event) {\r\n\t\tevent.parent('li').prevAll('li').children('a').addClass('older-event').end().end().nextAll('li').children('a').removeClass('older-event');\r\n\t}\r\n\r\n\tfunction getTranslateValue(timeline) {\r\n\t\tconst timelineStyle = window.getComputedStyle(timeline.get(0), null);\r\n\t\tlet timelineTranslate = timelineStyle.getPropertyValue(\"-webkit-transform\") ||\r\n\t\t\ttimelineStyle.getPropertyValue(\"-moz-transform\") ||\r\n\t\t\ttimelineStyle.getPropertyValue(\"-ms-transform\") ||\r\n\t\t\ttimelineStyle.getPropertyValue(\"-o-transform\") ||\r\n\t\t\ttimelineStyle.getPropertyValue(\"transform\");\r\n\t\tlet translateValue = 0;\r\n\r\n\t\tif (timelineTranslate.indexOf('(') >= 0) {\r\n\t\t\ttimelineTranslate = timelineTranslate.split('(')[1];\r\n\t\t\ttimelineTranslate = timelineTranslate.split(')')[0];\r\n\t\t\ttimelineTranslate = timelineTranslate.split(',');\r\n\t\t\ttranslateValue = timelineTranslate[4];\r\n\t\t}\r\n\r\n\r\n\t\treturn Number(translateValue);\r\n\t}\r\n\r\n\tfunction setTransformValue(element, property, value) {\r\n\t\telement.style[\"-webkit-transform\"] = property + \"(\" + value + \")\";\r\n\t\telement.style[\"-moz-transform\"] = property + \"(\" + value + \")\";\r\n\t\telement.style[\"-ms-transform\"] = property + \"(\" + value + \")\";\r\n\t\telement.style[\"-o-transform\"] = property + \"(\" + value + \")\";\r\n\t\telement.style[\"transform\"] = property + \"(\" + value + \")\";\r\n\t}\r\n\r\n\t//based on http://stackoverflow.com/questions/542938/how-do-i-get-the-number-of-days-between-two-dates-in-javascript\r\n\tfunction parseDate(events) {\r\n\t\tconst dateArrays = [];\r\n\t\tevents.each(function () {\r\n\t\t\tconst dateComp = $(this).data('date'),\r\n\t\t\t\tnewDate = new Date(dateComp);\r\n\t\t\tdateArrays.push(newDate);\r\n\r\n\t\t});\r\n\t\treturn dateArrays;\r\n\t}\r\n\r\n\r\n\tfunction daydiff(first, second) {\r\n\t\treturn Math.round((second - first));\r\n\t}\r\n\r\n\tfunction minLapse(dates) {\r\n\t\t//determine the minimum distance among events\r\n\t\tconst dateDistances = [];\r\n\t\tfor (let i = 1; i < dates.length; i++) {\r\n\t\t\tconst distance = daydiff(dates[i - 1], dates[i]);\r\n\t\t\tdateDistances.push(distance);\r\n\t\t}\r\n\t\treturn Math.min.apply(null, dateDistances);\r\n\t}\r\n\r\n\t/*\r\n\t\tHow to tell if a DOM element is visible in the current viewport?\r\n\t\thttp://stackoverflow.com/questions/123999/how-to-tell-if-a-dom-element-is-visible-in-the-current-viewport\r\n\t*/\r\n\tfunction elementInViewport(el) {\r\n\t\tlet top = el.offsetTop;\r\n\t\tlet left = el.offsetLeft;\r\n\t\tlet width = el.offsetWidth;\r\n\t\tlet height = el.offsetHeight;\r\n\r\n\t\twhile (el.offsetParent) {\r\n\t\t\tel = el.offsetParent;\r\n\t\t\ttop += el.offsetTop;\r\n\t\t\tleft += el.offsetLeft;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\ttop < (window.pageYOffset + window.innerHeight) &&\r\n\t\t\tleft < (window.pageXOffset + window.innerWidth) &&\r\n\t\t\t(top + height) > window.pageYOffset &&\r\n\t\t\t(left + width) > window.pageXOffset\r\n\t\t);\r\n\t}\r\n\r\n\tfunction checkMQ() {\r\n\t\t//check if mobile or desktop device\r\n\t\treturn window.getComputedStyle(document.querySelector('.aheto-timeline--acacia-modern'), '::before').getPropertyValue('content').replace(/'/g, \"\").replace(/\"/g, \"\");\r\n\t}\r\n})(jQuery, window, document);\r\n"]}