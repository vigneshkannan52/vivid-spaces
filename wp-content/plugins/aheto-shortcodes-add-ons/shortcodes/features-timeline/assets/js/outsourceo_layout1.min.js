"use strict";!function(r,o,e){var t=r(".aheto-timeline--outsourceo-modern"),a=100;function l(e,t,n){var i=d(e.eventsWrapper),r=Number(e.timelineWrapper.css("width").replace("px",""));"next"==n?f(e,i-r+a,r-t):f(e,i+r-a)}function s(e,t,n){var i=e.eventsContent.find(".selected");if(0<("next"==n?i.next():i.prev()).length){var r=e.eventsWrapper.find(".selected"),a="next"==n?r.parent("li").next("li").children("a"):r.parent("li").prev("li").children("a");p(a,e.fillingLine,t),v(a,e.eventsContent),a.addClass("selected"),r.removeClass("selected"),c(a),function(e,t,n,i){var r=o.getComputedStyle(t.get(0),null),a=Number(r.getPropertyValue("left").replace("px","")),l=Number(n.timelineWrapper.css("width").replace("px",""));i=Number(n.eventsWrapper.css("width").replace("px",""));var s=d(n.eventsWrapper);("next"==e&&l-s<a||"prev"==e&&a<-s)&&f(n,l/2-a,l-i)}(n,a,e,t)}}function f(e,t,n){t=0<t?0:t,u(e.eventsWrapper.get(0),"translateX",(t=void 0!==n&&t<n?n:t)+"px"),0==t?e.timelineNavigation.find(".prev").addClass("inactive"):e.timelineNavigation.find(".prev").removeClass("inactive"),t==n?e.timelineNavigation.find(".next").addClass("inactive"):e.timelineNavigation.find(".next").removeClass("inactive")}function p(e,t,n){var i=o.getComputedStyle(e.get(0),null),r=i.getPropertyValue("left"),a=i.getPropertyValue("width"),l=(r=Number(r.replace("px",""))+Number(a.replace("px",""))/2)/n;u(t.get(0),"scaleX",l)}function v(e,t){var n,i,r=e.data("date"),a=t.find(".selected"),l=t.find('[data-date="'+r+'"]'),s=l.height();i=l.index()>a.index()?(n="selected enter-right","leave-left"):(n="selected enter-left","leave-right"),l.attr("class",n),a.attr("class",i).one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){a.removeClass("leave-right leave-left"),l.removeClass("enter-left enter-right")}),t.css("height",s+"px")}function c(e){e.parent("li").prevAll("li").children("a").addClass("older-event").end().end().nextAll("li").children("a").removeClass("older-event")}function d(e){var t=o.getComputedStyle(e.get(0),null),n=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform"),i=0;return 0<=n.indexOf("(")&&(i=(n=(n=(n=n.split("(")[1]).split(")")[0]).split(","))[4]),Number(i)}function u(e,t,n){e.style["-webkit-transform"]=t+"("+n+")",e.style["-moz-transform"]=t+"("+n+")",e.style["-ms-transform"]=t+"("+n+")",e.style["-o-transform"]=t+"("+n+")",e.style.transform=t+"("+n+")"}function m(e,t){return Math.round(t-e)}function h(e){for(var t=e.offsetTop,n=e.offsetLeft,i=e.offsetWidth,r=e.offsetHeight;e.offsetParent;)t+=(e=e.offsetParent).offsetTop,n+=e.offsetLeft;return t<o.pageYOffset+o.innerHeight&&n<o.pageXOffset+o.innerWidth&&t+r>o.pageYOffset&&n+i>o.pageXOffset}function g(){return o.getComputedStyle(e.querySelector(".aheto-timeline--outsourceo-modern"),"::before").getPropertyValue("content").replace(/'/g,"").replace(/"/g,"")}0<t.length&&t.each(function(){var t=r(this),n={};n.timelineWrapper=t.find(".aheto-timeline__events-wrapper"),n.eventsWrapper=n.timelineWrapper.children(".aheto-timeline__events"),n.fillingLine=n.eventsWrapper.children(".aheto-timeline__filling-line"),n.timelineEvents=n.eventsWrapper.find("a"),n.timelineDates=function(e){var n=[];return e.each(function(){var e=r(this).data("date"),t=new Date(e);n.push(t)}),n}(n.timelineEvents),n.eventsMinLapse=function(e){for(var t=[],n=1;n<e.length;n++){var i=m(e[n-1],e[n]);t.push(i)}return Math.min.apply(null,t)}(n.timelineDates),n.timelineNavigation=t.find(".aheto-timeline__navigation"),n.eventsContent=t.children(".aheto-timeline__events-content"),function(e,t){for(var n=0;n<e.timelineDates.length;n++){var i=m(e.timelineDates[0],e.timelineDates[n]),r=Math.round(i/e.eventsMinLapse)+2;e.timelineEvents.eq(n).css("left",r*t+"px")}}(n,a);var i=function(e,t){var n=m(e.timelineDates[0],e.timelineDates[e.timelineDates.length-1])/e.eventsMinLapse,i=(n=Math.round(n)+4)*t;return e.eventsWrapper.css("width",i+"px"),p(e.timelineEvents.eq(0),e.fillingLine,i),i}(n,a);t.addClass("loaded"),r(o).on("resize orientationchange",function(){n.eventsWrapper.find("li").last().find("a").hasClass("selected")&&l(n,i,"next")}),n.timelineNavigation.on("click",".next",function(e){e.preventDefault(),l(n,i,"next")}),n.timelineNavigation.on("click",".prev",function(e){e.preventDefault(),l(n,i,"prev")}),n.eventsWrapper.on("click","a",function(e){e.preventDefault(),n.timelineEvents.removeClass("selected"),r(this).addClass("selected"),c(r(this)),p(r(this),n.fillingLine,i),v(r(this),n.eventsContent)}),n.eventsContent.on("swipeleft",function(){"mobile"==g()&&s(n,i,"next")}),n.eventsContent.on("swiperight",function(){"mobile"==g()&&s(n,i,"prev")}),r(e).keyup(function(e){"37"==e.which&&h(t.get(0))?s(n,i,"prev"):"39"==e.which&&h(t.get(0))&&s(n,i,"next")})})}(jQuery,window,document);
