{"version":3,"sources":["advanced.js"],"names":["$","$body","$lightGallery","$magnificGallery","attachmentId","append","on","e","prevIndex","index","find","eq","data","prepend","magnificPopup","instance","currItem","getPhotoComments","addClass","empty","css","preventDefault","$form","btnText","text","formData","FormData","$btn","whizzy","ajaxurl","processData","contentType","beforeSend","html","res","status","val","msg","removeClass","complete","method","ajax","url","attachment_id","action","scrollTop","animate","gallery_id","nonce","success","attr","last","first","window","href","location","redirect_to","jQuery"],"mappings":"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","file":"advanced.min.js","sourcesContent":[";(function($) {\r\n    'use strict';\r\n\r\n    // comments for gallery\r\n    (function() {\r\n        var $body = $('body');\r\n        var $lightGallery = $('.js-whizzy-gallery.lightpopup');\r\n        var $magnificGallery = $('.js-whizzy-gallery:not(.lightpopup)');\r\n        var attachmentId = null;\r\n\r\n        $lightGallery.on('onAfterOpen.lg', function() {\r\n            $('.lg-toolbar').append('<span class=\"whizzy-open-photo-comments lg-icon fa fa-comments\"></span>');\r\n        });\r\n        $lightGallery.on('onBeforeSlide.lg', function(e, prevIndex, index) {\r\n            attachmentId = $lightGallery.find('.js-proof-photo').eq(index).data('attachment_id');\r\n        });\r\n\r\n        $magnificGallery.on('mfpOpen', function() {\r\n            $('.mfp-figure').prepend('<button type=\"button\" class=\"whizzy-open-photo-comments magnific\"><i class=\"fa fa-comments\"></i></button>');\r\n        });\r\n        $magnificGallery.on('mfpChange', function() {\r\n            var index = $.magnificPopup.instance.currItem.index;\r\n\r\n            attachmentId = $magnificGallery.find('.js-proof-photo').eq(index).data('attachment_id');\r\n        });\r\n\r\n        $body.on('click', '.whizzy-open-photo-comments', function() {\r\n            getPhotoComments();\r\n        });\r\n        $body.on('click', '.whizzy-popup-close', function() {\r\n            $('.whizzy-popup-wrapper').addClass('hidden');\r\n            $('.whiizy-pro--comments-list-container').empty();\r\n            $('body').css('overflow', '');\r\n        });\r\n        $body.on('submit', '#whizzy-photo-comments-form', function(e) {\r\n            e.preventDefault();\r\n\r\n            var $form = $(this);\r\n            var $btn = $form.find('button');\r\n            var btnText = $btn.text();\r\n            var formData = new FormData($form[0]);\r\n                formData.append('attachment_id', attachmentId);\r\n\r\n            $.ajax({\r\n                url: whizzy.ajaxurl,\r\n                method: 'post',\r\n                data: formData,\r\n                processData: false,\r\n                contentType: false,\r\n                beforeSend: function() {\r\n                    $form.find('.errors-list').html('').addClass('hidden');\r\n                    $btn.html('<div class=\"whizzy-load-speeding-wheel button\"></div>');\r\n                },\r\n                success: function(res) {\r\n                    if (true === res.status) {\r\n                        getPhotoComments();\r\n                        $form.find('input[type=\"text\"], input[type=\"email\"], textarea').val('');\r\n                    } else {\r\n                        $form.find('.errors-list').html(res.msg).removeClass('hidden');\r\n                    }\r\n                },\r\n                complete: function() {\r\n                    $btn.html(btnText);\r\n                }\r\n            });\r\n        });\r\n\r\n        var getPhotoComments = function() {\r\n            $.ajax({\r\n                url: whizzy.ajaxurl,\r\n                method: 'get',\r\n                data: {\r\n                    action: 'whizzy-get-photo-comments',\r\n                    attachment_id: attachmentId\r\n                },\r\n                beforeSend: function() {\r\n                    $('#whizzy-pro--loader').removeClass('hidden');\r\n                },\r\n                success: function(res) {\r\n                    $('.whiizy-pro--comments-list-container').html(res);\r\n                    $('.popup-scroll').animate({scrollTop: 0}, 'slow');\r\n                },\r\n                complete: function() {\r\n                    $('body').css('overflow', 'hidden');\r\n                    $('#whizzy-pro--loader').addClass('hidden');\r\n                    $('.whizzy-popup-wrapper').removeClass('hidden');\r\n                }\r\n            });\r\n        };\r\n\r\n    })();\r\n\r\n    // approve gallery\r\n    (function() {\r\n        $('.whizzy-pro--approve-gallery').on('click', function(e) {\r\n            e.preventDefault();\r\n\r\n            var $btn = $(this);\r\n            var btnText = $btn.html();\r\n\r\n            $.ajax({\r\n                url: whizzy.ajaxurl,\r\n                method: 'post',\r\n                data: {\r\n                    action: 'whizzy-approve-galley',\r\n                    gallery_id: $btn.data('id'),\r\n                    nonce: $btn.data('nonce')\r\n                },\r\n                beforeSend: function() {\r\n                    $btn.html('<div class=\"whizzy-load-speeding-wheel button small\"></div>');\r\n                },\r\n                success: function(res) {\r\n                    $btn.html(btnText);\r\n                    $btn.find('em').addClass('hidden');\r\n\r\n                    if (true === res) {\r\n                        $btn.attr('disabled', 'disabled');\r\n                        $btn.find('em').last().removeClass('hidden');\r\n                    } else {\r\n                        $btn.find('em').first().removeClass('hidden');\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    })();\r\n\r\n    // login\r\n    (function() {\r\n        $('#whizzy-pro--login').on('submit', function(e) {\r\n            e.preventDefault();\r\n\r\n            var $form = $(this);\r\n            var $btn = $form.find('button');\r\n            var btnText = $btn.text();\r\n            var formData = new FormData($form[0]);\r\n\r\n            $.ajax({\r\n                url: whizzy.ajaxurl,\r\n                method: 'post',\r\n                data: formData,\r\n                processData: false,\r\n                contentType: false,\r\n                beforeSend: function() {\r\n                    $btn.html('<div class=\"whizzy-load-speeding-wheel button black\"></div>');\r\n                    $form.find('.errors-list').html('').addClass('hidden');\r\n                },\r\n                success: function(res) {\r\n                    if (true === res.status) {\r\n                        window.location.href = res.redirect_to;\r\n                    } else {\r\n                        $form.find('.errors-list').html(res.msg).removeClass('hidden');\r\n                    }\r\n                },\r\n                complete: function() {\r\n                    $btn.html(btnText);\r\n                }\r\n            });\r\n        });\r\n    })();\r\n\r\n})(jQuery);"]}