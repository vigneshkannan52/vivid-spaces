{"version":3,"sources":["public.js"],"names":["$","document","ready","on","ev","stopPropagation","this","data","photo","toggleClass","selected","addClass","hasClass","attachment_id","jQuery","html","whizzy","l10n","deselect","find","select","ajax","type","url","ajaxurl","action","complete","beforeSend","removeClass","prepare_download_button","each","magnificPopup","delegate","removalDelay","mainClass","item","image","el","text","gallery","enabled","navigateByImgClick","tPrev","tCounter","ofCounter","bound_reference_links","whizzy_settings","zip_archive_generation","download_button","attr","removeAttr","i","bound","target","length","setTimeout","slice","animate","scrollTop","offset","top","itemSelector","layoutMode","masonry","columnWidth","layoutM","self","filters","prev","whizzyinitisotope","window","addEventListener","isotope","filter","selector","img_sel","parent_sel","_this","$imgDataHidden","$parent","closest","parent","css","src","show","hide","space","lightGallery","mode","closable","iframeMaxWidth","thumbnail","showThumbByDefault","padding-left"],"mappings":"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","file":"public.min.js","sourcesContent":["(function ($) {\r\n\t\"use strict\";\r\n\t$(document).ready(function () {\r\n\r\n\t\t$(document).on('click', '.w-select-action', function(ev){\r\n\t\t\tev.preventDefault();\r\n\t\t\tev.stopPropagation();\r\n\t\t\t//var photo = $('#' + $(this).data('photoid'));\r\n\t\t\tlet photo = $('[id=' + $(this).data('photoid') + ']');\r\n\t\t\t$(photo).toggleClass('selected');\r\n\t\t\t$(photo).addClass('selecting');\r\n\r\n\t\t\tlet selected = $(photo).hasClass('selected'),\r\n\t\t\t\tattachment_id = $(photo).data('attachment_id');\r\n\r\n\t\t\tif( selected ){\r\n\t\t\t\tjQuery(this).find('.button-text').html(whizzy.l10n.deselect);\r\n\t\t\t\tphoto.find('.w-select-action  .button-text').html(whizzy.l10n.deselect);\r\n\t\t\t} else {\r\n\t\t\t\tjQuery(this).find('.button-text').html(whizzy.l10n.select);\r\n\t\t\t\tphoto.find('.w-select-action .button-text').html(whizzy.l10n.select);\r\n\t\t\t}\r\n\r\n\t\t\t$.ajax({ type: \"post\",url: whizzy.ajaxurl,data: {\r\n\t\t\t\t\taction: 'whizzy_image_click',\r\n\t\t\t\t\tattachment_id: attachment_id,\r\n\t\t\t\t\tselected: selected\r\n\t\t\t\t},\r\n\t\t\t\tbeforeSend: function() {\r\n\t\t\t\t\t//\r\n\t\t\t\t}, //show loading just when link is clicked\r\n\t\t\t\tcomplete: function() {\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t$(photo).removeClass('selecting');\r\n\t\t\t\t\t}, 600);\r\n\t\t\t\t}, //stop showing loading when the process is complete\r\n\r\n\t\t\t\tsuccess:function(response){\r\n\t\t\t\t\t\t// console.log(response);\r\n\t\t\t\t\t\t// var result = JSON.parse(response);\r\n\t\t\t\t\t\t// console.log(result);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tprepare_download_button();\r\n\t\t});\r\n\r\n\t\tprepare_download_button();\r\n\r\n\t\t$('.js-whizzy-gallery:not(.lightpopup)').each(function() { // the containers for all your galleries should have the class gallery\r\n\t\t\t$(this).magnificPopup({\r\n\t\t\t\tdelegate: 'a.zoom-action', // the container for each your gallery items\r\n\t\t\t\ttype: 'image',\r\n\t\t\t\tremovalDelay: 500,\r\n\t\t\t\tmainClass: 'mfp-fade',\r\n\t\t\t\timage:{\r\n\t\t\t\t\ttitleSrc: function(item) {\r\n\t\t\t\t\t\tlet text = $('#' + item.el.data('photoid')).hasClass('selected') == true ? whizzy.l10n.deselect : whizzy.l10n.select;\r\n\r\n\t\t\t\t\t\treturn '<a class=\"meta__action  meta__action--popup  w-select-action\"  id=\"popup-selector\" href=\"#\" data-photoid=\"' + item.el.data('photoid') + '\"><span class=\"button-text\">' + text + '</span></a>';\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tgallery:{\r\n\t\t\t\t    enabled:true,\r\n\t\t\t\t    navigateByImgClick: true,\r\n\t\t\t\t\ttPrev: whizzy.l10n.previous, // title for left button\r\n\t\t\t\t\ttNext: whizzy.l10n.next, // title for right button\r\n\t\t\t\t\ttCounter: '<span class=\"mfp-counter\">%curr% ' + whizzy.l10n.ofCounter + ' %total%</span>' // markup of counter\r\n\t\t\t\t},\r\n\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tbound_reference_links();\r\n\t});\r\n\r\n\t// check if the download button needs to be disabled\r\n\tlet prepare_download_button = function () {\r\n\r\n\t\tif ( whizzy.whizzy_settings.zip_archive_generation !== 'automatic' ) return;\r\n\r\n\t\tlet download_button = $('.js-download');\r\n\t\tdownload_button.attr('disabled', 'disabled');\r\n\r\n\t\t$('.proof-photo').each(function(i,el){\r\n\t\t\tif ( $(this).hasClass('selected') ) {\r\n\t\t\t\tdownload_button.removeAttr('disabled');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tlet bound_reference_links = function(){\r\n\r\n\t\tif ( typeof bound_reference_links.bound === 'undefined' ) {\r\n\r\n\t\t\tbound_reference_links.bound = true;\r\n\r\n\t\t\t$(document).on('click', 'span.whizzy_photo_ref', function() {\r\n\r\n\t\t\t\t//if (location.pathname.replace(/^\\//,'') == $(this).data('href').replace(/^\\//,'') && location.hostname == this.hostname) {\r\n\r\n\t\t\t\t\tlet target = $($(this).data('href'));\r\n\t\t\t\t\ttarget = target.length ? target : $('[name=' + $(this).data('href').slice(1) +']');\r\n\r\n\t\t\t\t\tif (target.length) {\r\n\t\t\t\t\t\t$('body').animate(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tscrollTop: target.offset().top-200\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t500,\r\n\t\t\t\t\t\t\tfunction (){\r\n\t\t\t\t\t\t\t\t$(target).addClass('scrooled_from_comments');\r\n\r\n\t\t\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\t\t$(target).removeClass('scrooled_from_comments');\r\n\t\t\t\t\t\t\t\t}, 800);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t//}\r\n\t\t\t});\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\r\n\r\n    /*=================================*/\r\n    /* BACKGROUND */\r\n    /*=================================*/\r\n    //sets child image as a background\r\n    function wpc_add_img_bg(img_sel, parent_sel) {\r\n        if (!img_sel) {\r\n\r\n            return false;\r\n        }\r\n        let $parent, $imgDataHidden, _this;\r\n        $(img_sel).each(function () {\r\n            _this = $(this);\r\n            $imgDataHidden = _this.data('s-hidden');\r\n            $parent = _this.closest(parent_sel);\r\n            $parent = $parent.length ? $parent : _this.parent();\r\n            $parent.css('background-image', 'url(' + this.src + ')').addClass('s-back-switch');\r\n            if ($imgDataHidden) {\r\n                _this.css('visibility', 'hidden');\r\n                _this.show();\r\n            }\r\n            else {\r\n                _this.hide();\r\n            }\r\n        });\r\n    }\r\n\r\n    jQuery(window).on('load', function () {\r\n        wpc_add_img_bg('.s-img-switch');\r\n\r\n        $(\".js-whizzy-gallery.lightpopup\").lightGallery({\r\n            selector: 'a.zoom-action',\r\n            mode: 'lg-slide',\r\n            closable: false,\r\n            iframeMaxWidth: '80%',\r\n            download: false,\r\n            thumbnail: false,\r\n            showThumbByDefault: false\r\n        });\r\n\r\n    });\r\n\r\n\r\n    $('#whizzy_proof_gallery').each(function () {\r\n        let space = $(this).data('space');\r\n        $(this).find('.proof-photo').css({\r\n            'padding-right': space,\r\n            'padding-left': space,\r\n            'margin-top': '0',\r\n            'margin-bottom': space*2\r\n        });\r\n        $(this).css({\r\n            'margin-left': -space + 'px',\r\n            'margin-right': -space + 'px'\r\n        });\r\n\r\n    });\r\n\r\n\r\n\r\n    function whizzyinitisotope() {\r\n        if ($('#whizzy_proof_gallery.masonry').length) {\r\n            $('#whizzy_proof_gallery.masonry').each(function () {\r\n                let self = $(this);\r\n\r\n                let layoutM = self.attr('data-layout') || 'masonry';\r\n\r\n                let filters = self.prev('.whizzy-filters');\r\n\r\n\t\t\t\tif(filters.length){\r\n\r\n\t\t\t\t\tfilters.find('button').on('click', function() {\r\n\r\n\t\t\t\t\t\tlet selector = $(this).attr('data-selector');\r\n\r\n\t\t\t\t\t\tself.prev('.whizzy-filters').find('button').removeClass('is-checked');\r\n\r\n\t\t\t\t\t\t$(this).addClass('is-checked');\r\n\r\n\t\t\t\t\t\tself.isotope({\r\n\t\t\t\t\t\t\tfilter: selector\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\r\n                self.isotope({\r\n                    itemSelector: '.proof-photo',\r\n                    layoutMode: layoutM,\r\n                    masonry: {\r\n                        columnWidth: '.proof-photo'\r\n                    }\r\n                });\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    $(window).on('load resize', function () {\r\n        whizzyinitisotope();\r\n    });\r\n\r\n    window.addEventListener(\"orientationchange\", function () {\r\n        whizzyinitisotope();\r\n\t});\r\n\r\n\r\n\r\n}(jQuery));"]}