"use strict";!function(l){!function(){var t=l("body"),o=l(".js-whizzy-gallery.lightpopup"),e=l(".js-whizzy-gallery:not(.lightpopup)"),a=null;o.on("onAfterOpen.lg",function(){l(".lg-toolbar").append('<span class="whizzy-open-photo-comments lg-icon fa fa-comments"></span>')}),o.on("onBeforeSlide.lg",function(t,e,n){a=o.find(".js-proof-photo").eq(n).data("attachment_id")}),e.on("mfpOpen",function(){l(".mfp-figure").prepend('<button type="button" class="whizzy-open-photo-comments magnific"><i class="fa fa-comments"></i></button>')}),e.on("mfpChange",function(){var t=l.magnificPopup.instance.currItem.index;a=e.find(".js-proof-photo").eq(t).data("attachment_id")}),t.on("click",".whizzy-open-photo-comments",function(){s()}),t.on("click",".whizzy-popup-close",function(){l(".whizzy-popup-wrapper").addClass("hidden"),l(".whiizy-pro--comments-list-container").empty(),l("body").css("overflow","")}),t.on("submit","#whizzy-photo-comments-form",function(t){t.preventDefault();var e=l(this),n=e.find("button"),o=n.text(),i=new FormData(e[0]);i.append("attachment_id",a),l.ajax({url:whizzy.ajaxurl,method:"post",data:i,processData:!1,contentType:!1,beforeSend:function(){e.find(".errors-list").html("").addClass("hidden"),n.html('<div class="whizzy-load-speeding-wheel button"></div>')},success:function(t){!0===t.status?(s(),e.find('input[type="text"], input[type="email"], textarea').val("")):e.find(".errors-list").html(t.msg).removeClass("hidden")},complete:function(){n.html(o)}})});var s=function(){l.ajax({url:whizzy.ajaxurl,method:"get",data:{action:"whizzy-get-photo-comments",attachment_id:a},beforeSend:function(){l("#whizzy-pro--loader").removeClass("hidden")},success:function(t){l(".whiizy-pro--comments-list-container").html(t),l(".popup-scroll").animate({scrollTop:0},"slow")},complete:function(){l("body").css("overflow","hidden"),l("#whizzy-pro--loader").addClass("hidden"),l(".whizzy-popup-wrapper").removeClass("hidden")}})}}(),l(".whizzy-pro--approve-gallery").on("click",function(t){t.preventDefault();var e=l(this),n=e.html();l.ajax({url:whizzy.ajaxurl,method:"post",data:{action:"whizzy-approve-galley",gallery_id:e.data("id"),nonce:e.data("nonce")},beforeSend:function(){e.html('<div class="whizzy-load-speeding-wheel button small"></div>')},success:function(t){e.html(n),e.find("em").addClass("hidden"),!0===t?(e.attr("disabled","disabled"),e.find("em").last().removeClass("hidden")):e.find("em").first().removeClass("hidden")}})}),l("#whizzy-pro--login").on("submit",function(t){t.preventDefault();var e=l(this),n=e.find("button"),o=n.text(),i=new FormData(e[0]);l.ajax({url:whizzy.ajaxurl,method:"post",data:i,processData:!1,contentType:!1,beforeSend:function(){n.html('<div class="whizzy-load-speeding-wheel button black"></div>'),e.find(".errors-list").html("").addClass("hidden")},success:function(t){!0===t.status?window.location.href=t.redirect_to:e.find(".errors-list").html(t.msg).removeClass("hidden")},complete:function(){n.html(o)}})})}(jQuery);
